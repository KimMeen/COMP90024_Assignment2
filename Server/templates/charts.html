<html>
<head>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js?hcode=be5162d915534272a57d0bb781d27f2b"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js?hcode=be5162d915534272a57d0bb781d27f2b"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js?hcode=be5162d915534272a57d0bb781d27f2b"></script>
  <link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css?hcode=be5162d915534272a57d0bb781d27f2b" type="text/css" rel="stylesheet">
  <link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css?hcode=be5162d915534272a57d0bb781d27f2b" type="text/css" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/css?family=Raleway:400,500,500i,700,800i" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type="text/javascript"></script>
	<script src="{{ url_for('static', filename='js/dataRequest.js') }}"></script>
	<style type="text/css">
	.container {
    width: 100%;
    height: 150px;
    margin: 0;
    padding: 0;
		margin: 0 auto;
	}
    .container1 {
    width: 100%;
    height: 350px;
    margin: 0;
    padding: 0;
		margin: 0 auto;
	}
	ul li a{
			margin-right: 20px;
	}
</style>
</head>
<body onload = 'getLastSelectedCity()'>
	<nav class="navbar navbar-expand-sm  navbar-light bg-light">
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarTogglerDemo03">
		<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
		<li class="nav-item">
		<a class="nav-link" href="{{url_for('home')}}">Home <span class="sr-only">(current)</span></a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="{{url_for('goToMap')}}">Map</a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="{{url_for('goToRegionMap')}}">Choropleth Map</a>
		</li>
		<li class="nav-item">
		<a class="nav-link" href="#">Data Graphs</a>
		</li>

		<li class="nav-item">
		<select class="browser-default custom-select" id = "selectCase" onchange="selectChart();">
			<option value="Smoking" selected>Smoking</option>
			<option value="Fastfood">Fastfood</option>
			<option value="Alcohols">Alcohols</option>
		</select>
		</li>

		<li class="nav-item"> <p> &nbsp;&nbsp;&nbsp;&nbsp;</p></li>
		<li class="nav-item">
		<select class="browser-default custom-select" id = "selectCity" onchange="reloadChart();">
		<option value="Melbourne">Melbourne</option>
		<option value="Sydney">Sydney</option>
		<option value="Brisbane">Brisbane</option>
		<option value="Adelaide">Adelaide</option>
		<option value="Perth">Perth</option>
		</select>
		</li>

		</ul>
		<div class="social-part">
		<i>Data is powered by &nbsp &nbsp </i>
		<i class="fa fa-twitter" aria-hidden="true"></i>
		</div>
		</div>
 </nav>
  <div class="container1" id = "container"></div>
	  <div class="container1" id="container1"></div>
<script>

function drawChart(data0, title, container){
		var data = anychart.data.set(data0);
    // create a chart
    var chart = anychart.bar();
    // create a bar series and set the data
    var series = chart.bar(data);
    chart.animation(true);
    // set the chart title
    chart.title(title);
    // set the titles of the axes
    chart.xAxis().title("Regions");
    chart.yAxis().title("Portion");
    // set the container id
    chart.container(container);
    // initiate drawing the chart
    chart.draw();

}

function selectChart(){
		var chart = document.getElementById("selectCase").value;
		console.log(chart)
		document.getElementById("container").innerHTML = "";
		document.getElementById("container1").innerHTML = "";
		if (chart == "Smoking"){
			var smoking = getCityTweetsData("Smoking")
			drawChart(smoking[0], "Degree of affection : Smoking", "container")
			drawChart(smoking[1], "Aurin Statistic - Number of Lung Cancer Patients", "container1")
		}else if (chart == "Fastfood") {
			var fastFood = getCityTweetsData("Fastfood")
			drawChart(fastFood[0], "Degree of affection : Fastfood (Tweets)", "container")
			drawChart(fastFood[1], "Aurin Statistic -  Estimated number of people aged 18 years old and over who have obesity", "container1")
		}else if (chart == "Alcohols") {
			var alcohol = getCityTweetsData("Alcohols")
			drawChart(alcohol[0], "Degree of affection : Alcohol (Tweets)", "container")
			drawChart(alcohol[1], "Aurin Statistic - Estimated number of people aged 18 years old and over who had high blood pressure", "container1")
		}
}

anychart.onDocumentReady(function () {
	var smoking = getCityTweetsData("Smoking")
	drawChart(smoking[0], "Degree of affection : Smoking", "container")
	drawChart(smoking[1], "Aurin Statistic - Number of Lung Cancer Patients", "container1")
});
</script>
</body>
</html>
